[> Home](../graduate_project.md)

---

# Выбор решения для реализации генератора нагрузки


## Статус

Принято

## Контекст

В QA002 есть требование, что система должна генерировать профиль нагрузки мелкими пакетами в 64 байта на максимальной 
скорости 10G интерфейса. Фреймрейт для таких условий должен быть более 14800000 pps. Стандартная сетевая подсистема 
Linux не способна на такую производительность. Необходимо выбрать решение, которое удовлетворило бы данным требованиям 

## Решение

### Альтернативы
- Альтернатива 1. FPGA  
  При получении определенного количества заявок на тестирование по определенной методике тестировщик собирает стенд с
  необходимой конфигурацией передает его системе. После обработки заявок оборудование стенда может быть использовано для
  построения стенда с другой конфигурацией.

- Альтернатива 2. SmartNIC  
  Под каждую методику тестирования собирается стенд с необходимой конфигурацией. Данный стенд регистрируется в системе и
  может быть использован для выполнения заявок на тестирование. Таким образом минимальное количество стендов равно
  количеству поддерживаемых методик тестирования. Если количество заявок по какой-либо из методик возрастет, то возможно
  горизонтальное масштабирование за счет добавления дополнительных стендов с подходящей конфигурацией.

- Альтернатива 3. Стандартные NIC + DPDK  
  Под каждую методику тестирования собирается стенд с необходимой конфигурацией. Данный стенд регистрируется в системе и
  может быть использован для выполнения заявок на тестирование. Таким образом минимальное количество стендов равно
  количеству поддерживаемых методик тестирования. Если количество заявок по какой-либо из методик возрастет, то возможно
  горизонтальное масштабирование за счет добавления дополнительных стендов с подходящей конфигурацией.

### Оценка и сравнительный анализ

|                     | FPGA | SmartNIC | Стандартные NIC + DPDK |
|---------------------|------|----------|------------------------|
| Производительность  | ---  | +++      |                        |
| Точность            | ---  | +++      |                        |
| Стоимость решения   | +++  | ---      |                        |
| Масштабируемость    | --   | +++      |                        |
| Утилизация ресурсов | +++  | +        |                        |

## Решение
Стенд с ручной сборкой требует меньше затрат на оборудование лучше утилизирует ресурсы оборудования, но на его сборку
требуется человеческий ресурс тестировщика, время выполнения заявок растет. С предварительно собранными стендами за
счет повышения стоимости решения мы добиваемся трех бизнес целей:
- уменьшаем необходимый человеческий ресурс тестировщика
- уменьшаем время выполнения заявки
- улучшаем масштабируемость

---

[> Home](../graduate_project.md)