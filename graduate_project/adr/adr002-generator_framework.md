[> Home](../graduate_project.md)

---

# Выбор решения для реализации генератора нагрузки


## Статус

Принято

## Контекст

В QA002 есть требование, что система должна генерировать профиль нагрузки мелкими пакетами в 64 байта на максимальной 
скорости 10G интерфейса. Фреймрейт для таких условий должен быть более 14800000 pps. Стандартная сетевая подсистема 
Linux не способна на такую производительность. Необходимо выбрать решение, которое удовлетворило бы данным требованиям. 

## Решение

### Альтернативы
- Альтернатива 1. FPGA  
  Реализация сетевого контроллера на основе FPGA дает наилучшую производительность и точность измерений. Плюс качество 
  генерируемого профиля нагрузки будет самым высоким. Скорость реализации новой функциональности низкая. Стоимость 
  разработки хардверной части контролера и разработки ПО под FPGA очень дорогие.

- Альтернатива 2. SmartNIC  
  На рынке есть сетевые контроллеры позволяющие производить обработку не только сетевого трафика и протоколов, но даже 
  какие-то вычисления прикладного уровня. Стоимость такой карты будет на порядок ниже разработки FPGA решения. 
  Производительности для 10G тоже будет более чем достаточно. Разработка прикладной части также ведется на языке C, что также 
  уменьшает стоимость решения. Скорость реализации новой функциональности довольно высокая. Присутствует vendor locking. 
  Качество генерируемого профиля нагрузки будет на высоком уровне.

- Альтернатива 3. Стандартные NIC + DPDK  
  Цена стандартного сетевого контролера самая низкая (даже если брать дорогие серверные контроллеры). Производительность 
  будет впритык к заявленной в спецификации.  На чистом сетевом стеке Linux необходимой производительности достичь 
  невозможно, необходимо будет использовать специализированный фреймворк. Точность наихудшая, но достаточная для наших 
  целей. Разработка ведется на языке C в пространстве пользователя Linux, что делает скорость реализации новой 
  функциональности простой и высокой. Качество генерируемого профиля будет зависеть от реализации и будет на приемлемом
  уровне.

### Оценка и сравнительный анализ

|                     | FPGA | SmartNIC | Стандартные NIC + DPDK |
|---------------------|------|----------|------------------------|
| Производительность  | ++++ | ++       | +-                     |
| Точность            | ++++ | +++      | +-                     |
| Стоимость решения   | ---- | +        | ++++                   |
| Скорость разработки | ---- | ++       | ++++                   |
| Vendor locking      | +-   | ----     | ++                     |

## Решение

На текущем этапе разработки системы решение Стандартные NIC + DPDK выглядит более приемлемым. Оно позволит не выйти за 
пределы временных и ресурсных ограничений при этом являясь достаточным для реализации методик тестирования  
занимающих большую часть от общего объема необходимого тестирования. 

---

[> Home](../graduate_project.md)